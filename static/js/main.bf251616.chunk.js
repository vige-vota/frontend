(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,a){},119:function(e,t){},125:function(e,t){},128:function(e,t,a){},129:function(e,t,a){},131:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},191:function(e,t,a){},193:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n,i,r,o=a(50),s=a(0),c=a.n(s),l=a(13),p=a.n(l),d=(a(104),a(6)),u=a(7),m=a(8),f=a(4),h=a(9),g=a(11),v=a(5),b=a(79),y=a(38),E=a(1),k=function e(t){var a=I(t);return null!=a?e(a):t},j=function(e){var t=I(e);return null!=t&&t.parties},C=function(e){var t=I(e);return null!=t&&t.groups},O=function(e){var t=I(e);return null!=t&&t.candidates},P=function e(t,a){0===a.filter((function(e){return e===t})).length&&a.push(t);var n=I(t);!n.votingPaper||C(n)&&n.votingPaper.disjointed||e(n,a)},x=function(e,t,a){var n=a.slice(0,t),i=a.slice(t);return n.concat(e,i)},N=function(){var e=null;return De.votingPapers.forEach((function(t){t.id>e&&(e=t.id),t.groups&&t.groups.forEach((function(t){t.id>e&&(e=t.id),t.parties&&t.parties.forEach((function(t){t.id>e&&(e=t.id),t.candidates&&t.candidates.forEach((function(t){t.id>e&&(e=t.id)}))}))})),t.parties&&t.parties.forEach((function(t){t.id>e&&(e=t.id),t.candidates&&t.candidates.forEach((function(t){t.id>e&&(e=t.id)}))}))})),e+1},S=function(e){return p.a.findDOMNode(e).querySelectorAll(".p-menuitem-link")},w=function(e){var t=S(e);return De.votingPapers.forEach((function(e,a){t[a].className.includes(e.type)||(t[a].className=t[a].className+" App-"+e.id+" "+e.type),t[a].style.setProperty("background-color","#"+e.color),t[a].style.setProperty("border-color","#"+e.color)})),t},M=function(e,t){var a=t.state.items.map((function(e){return e.id})).indexOf(e.id);if(t.state.activeItem.id===e.id){var n=S(t);0!==a?n[0].click():n[1].click()}t.state.items.splice(a,1),De.votingPapers.splice(a,1),t.forceUpdate()},_=function e(t,a){if(0===a.filter((function(e){return I(e)===t})).length||C(t)&&t.votingPaper.disjointed){var n=a.indexOf(t);a.splice(n,1);var i=I(t);!i.votingPaper||C(i)&&i.votingPaper.disjointed||i.selected||O(t)&&0!==a.filter((function(e){return O(e)&&I(e)===i})).length||e(i,a)}},I=function(e){var t=null;return De.votingPapers.forEach((function(a){a!==e&&(a.groups?a.groups.forEach((function(n){n===e?t=a:n.parties&&n.parties.forEach((function(a){a===e?t=n:a.candidates&&a.candidates.forEach((function(n){n===e&&(t=a)}))}))})):a.parties&&a.parties.forEach((function(n){n===e?t=a:n.candidates&&n.candidates.forEach((function(a){a===e&&(t=n)}))})))})),t},H=function(e,t){var a=new FileReader;a.onload=function(){t.setState({image:a.result.replace(/^data:.+;base64,/,"")}),t.forceUpdate()};var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){200===this.status&&a.readAsDataURL(this.response)},n.send()},T=function(e){for(var t=atob(e.image),a=new Array(t.length),n=0;n<t.length;n++)a[n]=t.charCodeAt(n);var i=new Uint8Array(a),r=new Blob([i],{type:"image/jpeg"});return new File([r],e.name,{type:"image/jpeg"})},U="M",B="F",L=function(e){var t=e.value.votingPaper,a=z.filter((function(e){return e.votingPaper===t}));if(e.value.type===se){var i=a.filter((function(e){return e.type===se}));return!!(e.value.selected||i.length<1||1===i.filter((function(t){return t===e.value})).length)||(n({name:e.value.name,type:c.a.createElement(E.a,{id:"app.error.group",defaultMessage:"the "+se})}),!1)}if(e.value.type===ce){var r=I(e.value),o=a.filter((function(e){return I(e)===r&&e.type===ce})),s=a.map((function(e){return e.type===ce?I(e):null})).filter((function(e,t,a){return a.indexOf(e)===t&&e})),l=a.filter((function(t){return t.type===A&&I(t)===e.value})).length>0;return!!(e.value.selected||l||o.length<1&&s.length<1&&(t.disjointed||a.filter((function(e){return e===r})).length>0||0===a.length))||(n({name:e.value.name,type:c.a.createElement(E.a,{id:"app.error.party",defaultMessage:"the "+ce})}),!1)}var p=I(e.value),d=a.filter((function(e){return e.type===A})).filter((function(e){return I(e)===p})),u=a.filter((function(e){return e.type===ce})),m=u.filter((function(t){return t===I(e.value)})),f=u.filter((function(t){return t!==I(e.value)})),h=a.filter((function(e){return e===p||e===I(p)}));return!(!(!t.disjointed&&(h.length>0||0===a.length)||t.disjointed&&(1===m.length||0===f.length))||!D(d,e.value))||(n({name:e.value.name,type:c.a.createElement(E.a,{id:"app.error.candidate",defaultMessage:"the "+A})}),!1)},D=function(e,t){var a=0,n=0,i=e.filter((function(e){return e!==t})),r=i.length;return t.selected||(t.sex===U&&a++,t.sex===B&&n++,r++),i.forEach((function(e){e.sex===U&&a++,e.sex===B&&n++})),Math.round(r/2)>=a&&Math.round(r/2)>=n},z=[],F=function(e){function t(){var e;return Object(d.a)(this,t),e=Object(m.a)(this,Object(f.a)(t).call(this)),n=e.errors.bind(Object(v.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"errors",value:function(e){var t={severity:"error",summary:c.a.createElement(E.a,{id:"app.error",defaultMessage:"Error"}),detail:c.a.createElement(E.a,{id:"app.error.message",defaultMessage:"Unable to select {type} {value}",values:{type:e.type,value:e.name}})};this.growl.show(t)}},{key:"render",value:function(){var e=this;return c.a.createElement(y.Growl,{ref:function(t){return e.growl=t}})}}]),t}(s.Component),A=(a(128),"candidate"),R=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).state={filteredCandidates:null},e.filterCandidates=e.filterCandidates.bind(Object(v.a)(e)),e.chosenCandidates=[],e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"filterCandidates",value:function(e){var t=this;setTimeout((function(){var a;a=0===e.query.length?t.props.config.filter((function(e){return!t.chosenCandidates.find((function(t){return t===e.name}))})):t.props.config.filter((function(a){return!t.chosenCandidates.find((function(e){return e===a.name}))&&a.name.toLowerCase().startsWith(e.query.toLowerCase())})),t.setState({filteredCandidates:a})}),250)}},{key:"itemTemplate",value:function(e){var t;return e.type=A,e.votingPaper=k(e),e.image&&(t=c.a.createElement("img",{className:"excludeSelect",alt:e.name,src:"data:image/jpeg;base64,".concat(e.image),style:{width:"32px",display:"inline-block",margin:"5px 0 2px 5px"}})),c.a.createElement("div",{className:"p-clearfix excludeSelect"},t,c.a.createElement("div",{className:"excludeSelect",style:{fontSize:"16px"}},e.name))}},{key:"onDropdownClick",value:function(e,t){this.refs["autocomplete-candidate-"+t].onDropdownClick(e),e.stopPropagation()}},{key:"onUnselect",value:function(e,t){if(8===e.nativeEvent.keyCode&&i.selected){this.setState((function(){var e={};return e[A+t]=i.name,e}))}}},{key:"onAutocompleteChange",value:function(e,t){var a=e.value.name;e.value.id&&(L(e)?(P(e.value,z),e.value.selected=!0):a=" _________________________");var n=this.state[A+t];if(n&&(i=this.props.config.filter((function(e){return e.name===n}))[0])&&L({value:i})){var r=this.chosenCandidates.indexOf(n);this.chosenCandidates.splice(r,1),this.props.config.forEach((function(e){e.name===n&&(e.selected=!1,_(e,z))}))}this.setState((function(){var e={};return e[A+t]=a,this.chosenCandidates.push(a),e}))}},{key:"render",value:function(){var e=this,t=[];if(this.props.config.length>0)for(var a=function(a){t.push(c.a.createElement(b.AutoComplete,{className:"excludeSelect",key:"autocomplete-"+A+"-"+a,ref:"autocomplete-"+A+"-"+a,onClick:function(t){e.onDropdownClick(t,a)},value:e.state[A+a],suggestions:e.state.filteredCandidates,completeMethod:e.filterCandidates,size:30,minLength:1,placeholder:a+1+" _________________________",itemTemplate:e.itemTemplate.bind(e),selectedItemTemplate:function(e){return a+1+" "+e},onChange:function(t){return e.onAutocompleteChange(t,a)},onKeyUp:function(t){return e.onUnselect(t,a)}}))},n=0;n<this.props.maxcandidates;n++)a(n);return c.a.createElement("div",{className:"candidates"},t)}}]),t}(s.Component),G=a(3),W=a.n(G),V=(a(129),a(18)),Y=a(24),q=(a(42),a(131),a(28)),J=a(39),X=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onFileSelect",value:function(e){Object(q.a)(Object(f.a)(t.prototype),"onFileSelect",this).call(this,e),this.state.files.length>1&&this.state.files.shift()}},{key:"remove",value:function(e){Object(q.a)(Object(f.a)(t.prototype),"remove",this).call(this,e),this.props.party.setState({image:""})}},{key:"validate",value:function(e){if(this.props.maxFileSize&&e.size>this.props.maxFileSize){var t={severity:"error",summary:c.a.createElement(E.a,{id:"app.admin.error.file.summary",defaultMessage:this.props.invalidFileSizeMessageSummary,values:{0:e.name}}),detail:c.a.createElement(E.a,{id:"app.admin.error.file.detail",defaultMessage:this.props.invalidFileSizeMessageDetail,values:{0:this.formatSize(this.props.maxFileSize)}})};return"advanced"===this.props.mode&&this.messagesUI.show(t),this.props.onValidationFail&&this.props.onValidationFail(e),!1}return!0}},{key:"componentDidUpdate",value:function(){if(this.props.party.state.opened){var e=this.props.party.props.party;e&&e.image?this.onFileSelect({target:{files:[T(e)]}}):this.state.files.pop(),this.props.party.setState({opened:!1}),"insert"!==this.props.party.state.operation||this.props.party.state.image||this.state.files.pop()}}}]),t}(J.FileUpload),K=function(e){return e&&e.name?!(!e||e.name.length>40)||(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.maxname",defaultMessage:"You can specify a maximum length of {number} characters for the name",values:{number:40}})}),!1):(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.party.name",defaultMessage:"The name of the party is mandatory"})}),!1)},$=function(e,t){return e&&e.name?e&&e.sex?!e||e.name.length>40?(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.maxname",defaultMessage:"You can specify a maximum length of {number} characters for the name",values:{number:40}})}),!1):!e||t.filter((function(t){return t.name.toUpperCase()===e.name.toUpperCase()&&t.id!==e.id})).length>0?(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.candidate.existingname",defaultMessage:"The name of the candidate already exists"})}),!1):!e||e.image&&t.filter((function(t){return t.image===e.image&&t.id!==e.id})).length>0?(r({name:"image",message:c.a.createElement(E.a,{id:"app.admin.error.candidate.existingimage",defaultMessage:"The image of the candidate already exists"})}),!1):!(!e||e.name.length<6||!e.name.includes(" "))||(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.candidate.surname",defaultMessage:"Insert name and surname please"})}),!1):(r({name:"sex",message:c.a.createElement(E.a,{id:"app.admin.error.candidate.sex",defaultMessage:"The sex of the candidate is mandatory"})}),!1):(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.candidate.name",defaultMessage:"The name of the candidate is mandatory"})}),!1)},Q=function(e){function t(){var e;return Object(d.a)(this,t),e=Object(m.a)(this,Object(f.a)(t).call(this)),r=e.errors.bind(Object(v.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"errors",value:function(e){var t={severity:"error",summary:c.a.createElement(E.a,{id:"app.error",defaultMessage:"Error"}),detail:e.message};this.growl.show(t)}},{key:"render",value:function(){var e=this;return c.a.createElement(y.Growl,{ref:function(t){return e.growl=t}})}}]),t}(s.Component),Z=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).state={partyName:"",partyTitle:"",image:"",operation:"",opened:!1},e.state.configurationHeader=c.a.createElement(E.a,{id:"app.configuration.headerparty",defaultMessage:"Configure your Party"}),e.state.configurationGroupHeader=c.a.createElement(E.a,{id:"app.configuration.headergroup",defaultMessage:"Configure your Group"}),e.state.configurationInsertPartyHeader=c.a.createElement(E.a,{id:"app.configuration.headerinsertparty",defaultMessage:"Insert your Party"}),e.state.configurationInsertGroupHeader=c.a.createElement(E.a,{id:"app.configuration.headerinsertgroup",defaultMessage:"Insert your Group"}),e.state.name=c.a.createElement(E.a,{id:"app.configuration.name",defaultMessage:"Name"}),e.state.title=c.a.createElement(E.a,{id:"app.configuration.title",defaultMessage:"Title"}),e.state.chooseImage=c.a.createElement(E.a,{id:"app.configuration.chooseimage",defaultMessage:"Choose Image"}),e.open=e.open.bind(Object(v.a)(e)),e.confirm=e.confirm.bind(Object(v.a)(e)),e.delete=e.delete.bind(Object(v.a)(e)),e.onHide=e.onHide.bind(Object(v.a)(e)),e.onSelect=e.onSelect.bind(Object(v.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){"insert"!==this.state.operation||this.state.partyName||this.name.element.focus()}},{key:"open",value:function(){this.setState({visible:!0})}},{key:"confirm",value:function(){var e,t={name:this.state.partyName,subtitle:this.state.partyTitle,image:this.state.image};if("update"===this.state.operation)(j(this.props.party)&&K(t)||C(this.props.party)&&((e=t)&&e.name?e&&!(e.name.length>40)||(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.maxname",defaultMessage:"You can specify a maximum length of {number} characters for the name",values:{number:40}})}),0):(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.group.name",defaultMessage:"The name of the group is mandatory"})}),0)))&&(this.props.party.name=t.name,this.props.party.subtitle=t.subtitle,this.props.party.image=t.image,this.setState({visible:!1}),this.props.votingPaper.forceUpdate());else if(K(t)){var a=N();t.id=a,this.props.party.name?this.props.party.parties.push(t):this.props.party.votingPaper.groups?(t.parties=[],this.props.party.votingPaper.groups.push(t)):this.props.party.votingPaper.parties.push(t),this.setState({visible:!1}),this.props.votingPaper.forceUpdate()}}},{key:"delete",value:function(){var e=I(this.props.party);if(j(this.props.party)){var t=e.parties.map((function(e){return e.id})).indexOf(this.props.party.id);e.parties.splice(t,1)}else{var a=e.groups.map((function(e){return e.id})).indexOf(this.props.party.id);e.groups.splice(a,1)}this.setState({visible:!1}),this.props.votingPaper.forceUpdate()}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"onSelect",value:function(e){e.files[0].objectURL&&H(e.files[0].objectURL,this)}},{key:"render",value:function(){var e=this,t="";this.props.party&&"update"===this.state.operation&&(t=c.a.createElement(E.a,{id:"app.delete",defaultMessage:"Delete"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.delete,className:"confirm"})})));var a=c.a.createElement("div",null,c.a.createElement(E.a,{id:"app.confirm",defaultMessage:"Confirm"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.confirm,className:"confirm"})})),t,c.a.createElement(E.a,{id:"app.cancel",defaultMessage:"Cancel"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-times",onClick:e.onHide,className:"p-button-secondary confirm"})}))),n="";return n=j(this.props.party)?"update"===this.state.operation?this.state.configurationHeader:this.state.configurationInsertHeader:"update"===this.state.operation?this.state.configurationGroupHeader:this.props.party.name||"little-nogroup"===this.props.party.votingPaper.type?this.state.configurationInsertPartyHeader:this.state.configurationInsertGroupHeader,c.a.createElement(V.Dialog,{contentStyle:{maxHeight:"600px",width:"360px"},header:n,visible:this.state.visible,footer:a,onHide:this.onHide,className:"modal-party"},c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.name),c.a.createElement("div",{className:"p-col"},c.a.createElement(Y.InputText,{ref:function(t){e.name=t},value:this.state.partyName,onChange:function(t){return e.setState({partyName:t.target.value})},onKeyPress:function(t){13===t.nativeEvent.keyCode&&e.confirm()}}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.title),c.a.createElement("div",{className:"p-col"},c.a.createElement(Y.InputText,{ref:function(t){e.title=t},value:this.state.partyTitle?this.state.partyTitle:"",onChange:function(t){return e.setState({partyTitle:t.target.value})}}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},c.a.createElement(E.a,{id:"app.configuration.chooseimage",defaultMessage:"Choose Image"},(function(t){return c.a.createElement(X,{accept:"image/*",maxFileSize:6e4,onSelect:e.onSelect,chooseLabel:t,party:e,previewWidth:150})})))))}}]),t}(s.Component),ee=a(47),te=a(40),ae=(a(140),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onFileSelect",value:function(e){Object(q.a)(Object(f.a)(t.prototype),"onFileSelect",this).call(this,e),this.state.files.length>1&&this.state.files.shift()}},{key:"remove",value:function(e){Object(q.a)(Object(f.a)(t.prototype),"remove",this).call(this,e),this.props.party.setState({image:""})}},{key:"componentDidUpdate",value:function(){if(this.props.party.state.opened){var e=this.props.candidate;e&&e.image?this.onFileSelect({target:{files:[T(e)]}}):this.state.files.pop(),this.props.party.setState({opened:!1}),"insert"!==this.props.party.state.operation||this.props.party.state.image||this.state.files.pop()}}}]),t}(J.FileUpload)),ne=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={id:"",name:"",sex:"",image:"",candidate:{},candidates:[],generateId:"",opened:!1},a.state.configurationHeader=c.a.createElement(E.a,{id:"app.configuration.headercandidates",defaultMessage:"Manage candidates"}),a.state.namesurnameLabel=c.a.createElement(E.a,{id:"app.configuration.namesurname",defaultMessage:"Name and surname"}),a.state.genderLabel=c.a.createElement(E.a,{id:"app.configuration.gender",defaultMessage:"Gender"}),a.state.chooseImage=c.a.createElement(E.a,{id:"app.configuration.chooseimage",defaultMessage:"Choose Image"}),a.open=a.open.bind(Object(v.a)(a)),a.confirm=a.confirm.bind(Object(v.a)(a)),a.onHide=a.onHide.bind(Object(v.a)(a)),a.onSelect=a.onSelect.bind(Object(v.a)(a)),a.imgTemplate=a.imgTemplate.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=this.props.party,t=[];e.candidates&&e.candidates.forEach((function(e){t.push({label:e.name,value:e.id,id:e.id,name:e.name,image:e.image,sex:e.sex})})),this.setState({id:"",sex:"",image:"",name:"",candidates:t,visible:!0})}},{key:"confirm",value:function(){this.props.party.candidates=this.state.candidates,this.props.partyComponent.forceUpdate(),this.setState({visible:!1})}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"onSelect",value:function(e){e.files[0].objectURL&&H(e.files[0].objectURL,this)}},{key:"imgTemplate",value:function(e){var t=this.state.candidates.filter((function(t){return t.id===parseInt(e.value)}))[0].image;return c.a.createElement("div",{className:"p-clearfix"},c.a.createElement("img",{alt:e.label,src:"data:image/jpeg;base64,".concat(t),style:{display:"inline-block",margin:"5px 0 0 5px",width:48}}),c.a.createElement("span",{style:{fontSize:"1.3em",float:"right",margin:"1em .5em 0 0"}},e.label))}},{key:"render",value:function(){var e=this,t=this.state.candidates.filter((function(t){return t.id===e.state.id}))[0],a=c.a.createElement("div",null,c.a.createElement(E.a,{id:"app.confirm",defaultMessage:"Confirm"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.confirm,className:"confirm"})})),c.a.createElement(E.a,{id:"app.cancel",defaultMessage:"Cancel"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-times",onClick:e.onHide,className:"p-button-secondary confirm"})})));return c.a.createElement(V.Dialog,{ref:"candidates-dialog",contentStyle:{maxHeight:"600px",width:"360px"},header:this.state.configurationHeader,visible:this.state.visible,footer:a,onHide:this.onHide,className:"modal-candidates"},c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.namesurnameLabel),c.a.createElement("div",{className:"p-col"},c.a.createElement(Y.InputText,{ref:function(t){e.name=t},value:this.state.name,onChange:function(t){e.setState({name:t.target.value})}}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.genderLabel),c.a.createElement("div",{className:"p-col"},U,c.a.createElement(ee.RadioButton,{value:U,name:"sex",onChange:function(t){return e.setState({sex:t.value})},checked:this.state.sex===U}),B,c.a.createElement(ee.RadioButton,{value:B,name:"sex",onChange:function(t){return e.setState({sex:t.value})},checked:this.state.sex===B}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},c.a.createElement(E.a,{ref:"upload",id:"app.configuration.chooseimage",defaultMessage:"Choose Image"},(function(a){return c.a.createElement(ae,{ref:"candidateUpload",accept:"image/*",maxFileSize:6e4,onSelect:e.onSelect,chooseLabel:a,party:e,candidate:t,previewWidth:150})})))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("hr",{style:{width:"110%",background:"#fff"}}),c.a.createElement("div",{className:"p-col admin-candidates"},c.a.createElement(E.a,{id:"app.insert",defaultMessage:"Insert"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:function(){var t={name:e.state.name,sex:e.state.sex,image:e.state.image,label:e.state.name};if($(t,e.state.candidates)){var a=e.state.generateId;a||(a=N()),e.setState({generateId:a+1}),t.id=a,t.value=a,e.state.candidates.push(t),e.refs.boxCandidates.forceUpdate()}},className:"confirm"})})),c.a.createElement(E.a,{id:"app.update",defaultMessage:"Update"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:function(){var t={id:e.state.id,name:e.state.name,sex:e.state.sex,image:e.state.image,label:e.state.name};$(t,e.state.candidates)&&(e.state.candidates.forEach((function(t){t.value===e.state.id&&(t.label=e.state.name,t.id=e.state.id,t.name=e.state.name,t.image=e.state.image,t.sex=e.state.sex)})),e.refs.boxCandidates.forceUpdate())},className:"confirm"})})),c.a.createElement(E.a,{id:"app.delete",defaultMessage:"Delete"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:function(){var t=e.state.candidates.map((function(e){return e.id})).indexOf(e.state.id);e.state.candidates.splice(t,1),e.setState({id:"",name:"",image:"",sex:""}),e.refs.upload.refs.candidateUpload.state.files.pop(),e.refs["candidates-dialog"].forceUpdate()},className:"confirm"})})))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},c.a.createElement(te.ListBox,{ref:"boxCandidates",value:this.state.id,filter:!0,options:this.state.candidates,onChange:function(t){var a=e.state.candidates.filter((function(e){return e.id===parseInt(t.value)}))[0];t.value?e.setState({id:t.value,name:a.name,sex:a.sex,image:a.image,opened:!0}):e.setState({id:"",name:"",sex:"",image:"",opened:!0}),e.refs.upload.refs.candidateUpload.forceUpdate()},itemTemplate:this.imgTemplate,style:{width:"30em"},listStyle:{maxHeight:"250px"}}))))}}]),t}(s.Component),ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;if(De.admin){var t={color:"#"+this.props.party.votingPaper.color},a="",n="",i="",r=C(this.props.party);if(r||!this.props.party.name){var o="";this.props.party.name||(o=" voting-paper-admin"),a=c.a.createElement(g.Button,{icon:"pi pi-plus",className:"admin-button"+o,style:t,onClick:function(t){t.stopPropagation(),e.refs.modalInsertParty.setState({partyName:"",partyTitle:"",image:"",operation:"insert",opened:!0}),e.refs.modalInsertParty.open()}})}return this.props.party.name&&(n=c.a.createElement(g.Button,{icon:"pi pi-briefcase",className:"admin-button",style:t,onClick:function(t){t.stopPropagation(),e.refs.modalParty.setState({partyName:e.props.party.name,partyTitle:e.props.party.subtitle,image:e.props.party.image,operation:"update",opened:!0}),e.refs.modalParty.open()}}),!r&&this.props.party.votingPaper.maxCandidates&&this.props.party.votingPaper.maxCandidates>0&&(i=c.a.createElement(g.Button,{icon:"pi pi-users",className:"admin-button",style:t,onClick:function(t){t.stopPropagation(),e.refs.modalCandidates.setState({operation:"update",opened:!0}),e.refs.modalCandidates.open()}}))),c.a.createElement("div",{className:"admin-buttons"},c.a.createElement(Z,{ref:"modalParty",party:this.props.party,votingPaper:this.props.votingPaper}),c.a.createElement(Z,{ref:"modalInsertParty",party:this.props.party,votingPaper:this.props.votingPaper}),c.a.createElement(ne,{ref:"modalCandidates",partyComponent:this.props.partyComponent,party:this.props.party,votingPaper:this.props.votingPaper}),n,a,i)}return""}}]),t}(s.Component),re=a(82),oe=a.n(re),se=(a(141),"group"),ce="party",le=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"putX",value:function(e){if((!this.refs["admin-buttons"].refs.modalParty&&!this.refs["admin-buttons"].refs.modalInsertParty&&!this.refs["admin-buttons"].refs.modalCandidates||!this.refs["admin-buttons"].refs.modalParty.state.visible&&!this.refs["admin-buttons"].refs.modalInsertParty.state.visible&&!this.refs["admin-buttons"].refs.modalCandidates.state.visible)&&(e.value=this.props.party,!e.target.classList.contains("excludeSelect")&&L(e))){e.value.selected?_(e.value,z):P(e.value,z);var t=this.props.party.name;this.props.party.subtitle&&(t=t+" "+this.props.party.subtitle),this.selectedItem?(this.selectedItem=null,e.value.selected=!1):(this.selectedItem=c.a.createElement("img",{className:"button-selected",alt:t,src:oe.a}),e.value.selected=!0),this.forceUpdate()}}},{key:"renderIcon",value:function(){if(this.props.icon){var e=W()(this.props.icon,"p-c",{"p-button-icon-left":"right"!==this.props.iconPos,"p-button-icon-right":"right"===this.props.iconPos}),t=this.props.party.name;return this.props.party.subtitle&&(t=t+" "+this.props.party.subtitle),c.a.createElement("span",{className:e},this.props.party.image&&c.a.createElement("img",{alt:t,src:"data:image/jpeg;base64,".concat(this.props.party.image)}),this.selectedItem)}return this.selectedItem}},{key:"renderLabel",value:function(){if(0===this.props.votingPaper.props.config.maxCandidates||this.props.party.name&&(!this.props.party.candidates||0===this.props.party.candidates.length)){var e=this.props.party.name||"p-btn",t="";return"undefined"!==this.props.party.subtitle&&(t=this.props.party.subtitle),c.a.createElement("span",{className:"p-button-text p-c"},e,c.a.createElement("span",{className:"p-button-subtext p-c"},t))}}},{key:"renderCandidates",value:function(){if(this.props.party.candidates)return c.a.createElement(R,{config:this.props.party.candidates,maxcandidates:k(this.props.party).maxCandidates})}},{key:"render",value:function(){var e=this;this.props.party.type=C(this.props.party)?se:ce,this.props.party.votingPaper=k(this.props.party);var t=W()("p-button p-component",this.props.className,{"p-button-icon-only":this.props.icon&&!this.props.party.name&&!this.props.party.candidates,"p-button-text-icon-left":this.props.icon&&(this.props.party.name||this.props.party.candidates)&&"left"===this.props.iconPos,"p-button-text-icon-right":this.props.icon&&(this.props.party.name||this.props.party.candidates)&&"right"===this.props.iconPos,"p-button-text-only":!this.props.icon&&(this.props.party.name||this.props.party.candidates),"p-disabled":this.props.disabled}),a=this.renderIcon(),n=this.renderLabel(),i=this.renderCandidates(),r=Object.assign({},this.props);return delete r.iconPos,delete r.icon,delete r.tooltip,delete r.tooltipOptions,delete r.party,delete r.votingPaper,c.a.createElement("div",Object.assign({ref:function(t){return e.element=t}},r,{className:t}),c.a.createElement(ie,{party:this.props.party,partyComponent:this,votingPaper:this.props.votingPaper,ref:"admin-buttons"}),"left"===this.props.iconPos&&a,n,i,"right"===this.props.iconPos&&a,this.props.children)}}]),t}(g.Button),pe=(a(142),a(143),a(144),a(145),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).jsonData=e,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderPartiesByGroup",value:function(e){var t=this;return e.parties.map((function(a){return t.renderParty(e,a)}))}},{key:"renderParties",value:function(e){var t=this;if(e)return e.map((function(e){return t.renderParty({id:0},e)}))}},{key:"renderParty",value:function(e,t){var a=this,n=Object.assign({});return n.key="party-"+e.id+"-"+t.id,n.icon="pi",n.className="p-button-secondary",n.party=t,n.ref=n.key,n.id=n.key,n.votingPaper=this,c.a.createElement(le,Object.assign({},n,{onClick:function(e){a.refs[n.ref].putX(e)}}))}},{key:"renderGroup",value:function(e){var t=this;if(e.name){var a,n={gridRow:"1 / "+(e.parties.length+1)},i="";e.parties.length>1&&(i="is-grid"),e.image&&(a="pi");var r=Object.assign({});return r.key="group-"+e.id,r.icon=a,r.party=e,r.className="p-button-secondary first-row "+i,r.style=n,r.ref=r.key,r.id=r.key,r.votingPaper=this,c.a.createElement(le,Object.assign({},r,{onClick:function(e){t.refs[r.ref].putX(e)}}))}}},{key:"render",value:function(){var e=this;return this.props.visible?this.jsonData.config.groups?c.a.createElement("div",{className:"page"},this.jsonData.config.groups.map((function(t,a){var n,i;return n=e.renderPartiesByGroup(t),i=e.renderGroup(t),c.a.createElement("div",{key:"parties-"+a,className:"content-party resize-"+a%2},i,n)})),c.a.createElement(ie,{party:{votingPaper:this.props.config},votingPaper:this,ref:"vt-admin-buttons"})):c.a.createElement("div",{className:"page"},c.a.createElement("div",{key:"parties-0",className:"content-party resize-0"},this.renderParties(this.jsonData.config.parties)),c.a.createElement(ie,{party:{votingPaper:this.props.config},votingPaper:this,ref:"vt-admin-buttons"})):c.a.createElement("div",{className:"page"})}}]),t}(s.Component)),de=(a(146),a(83)),ue=a(48),me=a(27),fe=a.n(me),he="ascending",ge=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={},a.state.confirmHeader=c.a.createElement(E.a,{id:"app.confirm.header",defaultMessage:"Confirm your vote"}),a.state.confirmBody=c.a.createElement(E.a,{id:"app.confirm.body",defaultMessage:"By clicking on (Yes) you will confirm the sending of the data. Once confirmed you will not be able to go back. Confirm the rescue?"}),a.open=a.open.bind(Object(v.a)(a)),a.errors=a.errors.bind(Object(v.a)(a)),a.confirm=a.confirm.bind(Object(v.a)(a)),a.onHide=a.onHide.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){this.setState({visible:!0})}},{key:"errors",value:function(e){var t=c.a.createElement(E.a,{id:"app.error",defaultMessage:"Error"});this.props.window.refs.validator.growl.show({severity:"error",summary:t,detail:e.message})}},{key:"createVote",value:function(){var e={votingPapers:[]};return De.votingPapers.forEach((function(t){return e.votingPapers.push({id:t.id})})),z.forEach((function(t){for(var a=t.votingPaper,n={},i=0;i<e.votingPapers.length;i++)e.votingPapers[i].id===a.id&&(n=e.votingPapers[i]);n.id||0===n.id||(n.id=a.id,e.votingPapers.push(n)),t.type===se?n.group={id:t.id}:t.type===ce?n.party={id:t.id}:t.type===A&&(n.party.candidates||(n.party.candidates=[]),n.party.candidates.push({id:t.id}))})),e}},{key:"confirm",value:function(){var e=this,t=p.a.findDOMNode(this).querySelectorAll(".pi-check")[0];t.className="pi pi-spin pi-spinner p-c p-button-icon-left",fe.a.post("https://vota-voting.vige.it:8443/vote",this.createVote()).then((function(a){return t.className="pi pi-check p-c p-button-icon-left",e.setState({visible:!1}),e.props.window.setState({visible:!1}),a})).catch((function(a){t.className="pi pi-check p-c p-button-icon-left",e.errors(a),console.log(a)}))}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"componentDidUpdate",value:function(){var e=p.a.findDOMNode(this).getElementsByClassName("p-rowgroup-header");De.votingPapers.forEach((function(t){for(var a=0;a<e.length;a++)e[a]&&e[a].innerHTML.indexOf('id="'+t.id)>=0&&(e[a].style.setProperty("background-color","#"+t.color),e[a].style.setProperty("border-color","#"+t.color))}))}},{key:"headerTemplate",value:function(e){return c.a.createElement("span",{className:"voting-paper-field",id:e.votingPaper.id},e.votingPaper.name)}},{key:"footerTemplate",value:function(e){return[c.a.createElement("td",{key:e.votingPaper.name+"_footerTotalLabel",colSpan:"2"})]}},{key:"sortByElement",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:he,n=e.votingPaper.id-t.votingPaper.id+e.type.toLowerCase().localeCompare(t.type.toLowerCase());return a===he?n:-1*n}},{key:"sort",value:function(e){var t=this;return e.sort((function(e,a){return t.sortByElement(e,a,"descending")}))}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",null,c.a.createElement(E.a,{id:"app.yes",defaultMessage:"Yes"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.confirm,className:"confirm"})})),c.a.createElement(E.a,{id:"app.no",defaultMessage:"No"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-times",onClick:e.onHide,className:"p-button-secondary confirm"})})));return c.a.createElement(V.Dialog,{contentStyle:{maxHeight:"500px"},header:this.state.confirmHeader,visible:this.state.visible,footer:t,onHide:this.onHide},this.state.confirmBody,c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(E.a,{id:"app.confirm.norecordsfound",defaultMessage:"Empty selection"},(function(t){return c.a.createElement(de.DataTable,{value:e.sort(z),rowGroupMode:"subheader",sortField:"votingPaper",sortOrder:1,groupField:"votingPaper",rowGroupHeaderTemplate:e.headerTemplate,rowGroupFooterTemplate:e.footerTemplate,emptyMessage:t},c.a.createElement(ue.Column,{field:"type",body:function(e){return c.a.createElement("b",null,c.a.createElement(E.a,{id:"app.confirm."+e.type,defaultMessage:e.type}))}}),c.a.createElement(ue.Column,{field:"name"}))})))}}]),t}(s.Component),ve=a(84),be=a.n(ve),ye=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={},a.state.confirmHeader=c.a.createElement(E.a,{id:"app.confirm.ins.header",defaultMessage:"Confirm your update"}),a.state.confirmBody=c.a.createElement(E.a,{id:"app.confirm.ins.body",defaultMessage:"By clicking on (Yes) you will confirm the sending of the data. Confirm the rescue?"}),a.open=a.open.bind(Object(v.a)(a)),a.errors=a.errors.bind(Object(v.a)(a)),a.confirm=a.confirm.bind(Object(v.a)(a)),a.onHide=a.onHide.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){this.setState({visible:!0})}},{key:"errors",value:function(e){this.props.window.refs.ruler.errors({message:e.message})}},{key:"confirm",value:function(){var e=this,t=JSON.parse(be()(De)),a=p.a.findDOMNode(this).querySelectorAll(".pi-check")[0];a.className="pi pi-spin pi-spinner p-c p-button-icon-left",fe.a.post("https://vota-votingpapers.vige.it:8543/votingPapers",t).then((function(t){return a.className="pi pi-check p-c p-button-icon-left",e.setState({visible:!1}),t})).catch((function(t){a.className="pi pi-check p-c p-button-icon-left",e.errors(t),console.log(t)}))}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"headerTemplate",value:function(e){return c.a.createElement("span",{className:"voting-paper-field",id:e.votingPaper.id},e.votingPaper.name)}},{key:"footerTemplate",value:function(e){return[c.a.createElement("td",{key:e.votingPaper.name+"_footerTotalLabel",colSpan:"2"})]}},{key:"render",value:function(){var e=this,t=c.a.createElement("div",null,c.a.createElement(E.a,{id:"app.yes",defaultMessage:"Yes"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.confirm,className:"confirm"})})),c.a.createElement(E.a,{id:"app.no",defaultMessage:"No"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-times",onClick:e.onHide,className:"p-button-secondary confirm"})})));return c.a.createElement(V.Dialog,{contentStyle:{maxHeight:"500px"},header:this.state.confirmHeader,visible:this.state.visible,footer:t,onHide:this.onHide},this.state.confirmBody,c.a.createElement("br",null),c.a.createElement("br",null))}}]),t}(s.Component),Ee=a(85),ke=a(86),je=a(87),Ce=(a(191),[{label:"Bigger",value:"bigger"},{label:"Bigger party groups",value:"bigger-partygroup"},{label:"Little",value:"little"},{label:"Little no groups",value:"little-nogroup"}]),Oe=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(f.a)(t).call(this))).state={votingPaper:"",app:"",operation:"",disjointed:!1,maxCandidates:0,color:"",type:""},e.state.configurationHeader=c.a.createElement(E.a,{id:"app.configuration.header",defaultMessage:"Configure your Voting Paper"}),e.state.configurationInsertHeader=c.a.createElement(E.a,{id:"app.configuration.insert.header",defaultMessage:"Add your Voting Paper"}),e.state.name=c.a.createElement(E.a,{id:"app.configuration.name",defaultMessage:"Name"}),e.state.disjointedLabel=c.a.createElement(E.a,{id:"app.configuration.disjointed",defaultMessage:"Disjointed vote"}),e.state.maxCandidatesLabel=c.a.createElement(E.a,{id:"app.configuration.maxcandidates",defaultMessage:"Candidates number"}),e.state.templatesLabel=c.a.createElement(E.a,{id:"app.configuration.templateslabel",defaultMessage:"Template Type"}),e.state.colorLabel=c.a.createElement(E.a,{id:"app.configuration.color",defaultMessage:"Voting Paper color"}),e.open=e.open.bind(Object(v.a)(e)),e.confirm=e.confirm.bind(Object(v.a)(e)),e.delete=e.delete.bind(Object(v.a)(e)),e.onHide=e.onHide.bind(Object(v.a)(e)),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if("insert"!==this.state.operation||this.state.votingPaper.value||this.name.element.focus(),this.state.app&&this.state.operation.startsWith("confirmed")){var t=w(this.state.app);if(this.setState({operation:""}),"confirmed_insert"===this.state.operation)t[t.length-3].click();else if("confirmed_update"===this.state.operation&&this.state.app.state.activeItem.id===this.state.votingPaper.value.id){var a=0;t.forEach((function(t,n){t.className.indexOf("-"+e.state.app.state.activeItem.id)>=0&&(a=n)})),t[a].click()}}}},{key:"open",value:function(){this.setState({visible:!0})}},{key:"confirm",value:function(){var e=this;if(function(e,t){var a=e.votingPaper.value;return a&&a.label?!a||a.label.length>50?(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.maxname",defaultMessage:"You can specify a maximum length of {number} characters for the name",values:{number:50}})}),!1):!a||t.filter((function(e){return e.name.toUpperCase()===a.label.toUpperCase()&&e.id!==a.id})).length>0?(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.existingname",defaultMessage:"The name of the voting paper already exists"})}),!1):!(!a||t.filter((function(t){return("little-nogroup"===e.type&&"little-nogroup"!==t.type||"little-nogroup"!==e.type&&"little-nogroup"===t.type)&&t.id===a.id})).length>0)||(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.littlenogroup",defaultMessage:"You cannot pass from a party voting paper to a group voting paper. Remove and create again the voting paper"})}),!1):(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.name",defaultMessage:"The name of the voting paper is mandatory"})}),!1)}(this.state,De.votingPapers)){if("update"===this.state.operation)De.votingPapers.forEach((function(t){t.id===e.state.votingPaper.value.id&&(t.name=e.state.votingPaper.value.label,t.disjointed=e.state.disjointed,t.maxCandidates=e.state.maxCandidates,t.color=e.state.color,t.type=e.state.type)})),this.state.app.state.items.forEach((function(t){t.id===e.state.votingPaper.value.id&&(t.label=e.state.votingPaper.value.label)})),this.setState({visible:!1,operation:"confirmed_update"});else{var t,a,n=N();"little-nogroup"===this.state.type?a=[]:t=[],De.votingPapers.push({id:n,name:this.state.votingPaper.value.label,groups:t,parties:a,disjointed:this.state.disjointed,maxCandidates:this.state.maxCandidates,color:this.state.color,type:this.state.type});var i=this.state.app.state.items.length-2;this.state.app.setState({items:x({id:n,label:this.state.votingPaper.value.label,icon:"pi pi-fw pi-briefcase"},i,this.state.app.state.items)}),this.setState({visible:!1,operation:"confirmed_insert"})}this.state.app.forceUpdate()}}},{key:"delete",value:function(){M(this.state.votingPaper.value,this.state.app),this.setState({visible:!1,operation:"confirmed_delete"})}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"imgTemplate",value:function(e){var t="./template_images/"+e.value+".png";return c.a.createElement("div",{className:"p-clearfix"},c.a.createElement("img",{alt:e.label,src:t,style:{display:"inline-block",margin:"5px 0 0 5px",width:48}}),c.a.createElement("span",{style:{fontSize:"1em",float:"right",margin:"1em .5em 0 0"}},e.label))}},{key:"render",value:function(){var e=this,t=this.state.votingPaper.value,a="";t&&"update"===this.state.operation&&(a=c.a.createElement(E.a,{id:"app.delete",defaultMessage:"Delete"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.delete,className:"confirm"})})));var n=c.a.createElement("div",null,c.a.createElement(E.a,{id:"app.confirm",defaultMessage:"Confirm"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-check",onClick:e.confirm,className:"confirm"})})),a,c.a.createElement(E.a,{id:"app.cancel",defaultMessage:"Cancel"},(function(t){return c.a.createElement(g.Button,{label:t,icon:"pi pi-times",onClick:e.onHide,className:"p-button-secondary confirm"})}))),i=this.state.configurationInsertHeader;return"update"===this.state.operation&&(i=this.state.configurationHeader),c.a.createElement(V.Dialog,{contentStyle:{maxHeight:"600px",width:"360px"},header:i,visible:this.state.visible,footer:n,onHide:this.onHide,className:"modal-voting-paper"},c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.name),c.a.createElement("div",{className:"p-col"},c.a.createElement(Y.InputText,{ref:function(t){e.name=t},value:t?t.label:"",onChange:function(a){return e.setState({votingPaper:{value:{label:a.target.value,id:t?t.id:"",icon:"pi pi-fw pi-briefcase"}}})},onKeyPress:function(t){13===t.nativeEvent.keyCode&&e.confirm()}}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.disjointedLabel),c.a.createElement("div",{className:"p-col"},c.a.createElement(Ee.Checkbox,{onChange:function(a){var n;(n=t)&&z.filter((function(e){return e.votingPaper.id===n.id})).length>0&&(r({name:"name",message:c.a.createElement(E.a,{id:"app.admin.error.disjointed",defaultMessage:"You must deselect all votes of the voting paper before to change the disjointed vote '{name}'",values:{name:n.label}})}),1)||e.setState({disjointed:a.checked})},checked:this.state.disjointed}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.maxCandidatesLabel),c.a.createElement("div",{className:"p-col"},c.a.createElement(ke.Spinner,{onChange:function(t){return e.setState({maxCandidates:Number.isInteger(t.value)?parseInt(t.value):0})},value:this.state.maxCandidates,min:0,max:3}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.colorLabel),c.a.createElement("div",{className:"p-col"},c.a.createElement(je.ColorPicker,{value:this.state.color,onChange:function(t){return e.setState({color:t.value})}}))),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},this.state.templatesLabel)),c.a.createElement("div",{className:"p-grid"},c.a.createElement("div",{className:"p-col"},c.a.createElement(te.ListBox,{value:this.state.type,filter:!0,options:Ce,onChange:function(t){t.value&&e.setState({type:t.value})},itemTemplate:this.imgTemplate,style:{width:"105em"},listStyle:{maxHeight:"250px"}}))))}}]),t}(s.Component),Pe=a(88),xe=(a(193),a(89)),Ne=a.n(xe),Se=a(90),we=a.n(Se),Me=a(91),_e=a(92),Ie=a.n(_e),He=a(93),Te=a.n(He),Ue=a(49),Be=a.n(Ue),Le=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e)))._initStompClient=function(){a.client=Te.a.over(new Ie.a(a.props.url,null,a.props.options)),a.client.heartbeat.outgoing=a.props.heartbeat,a.client.heartbeat.incoming=a.props.heartbeat,Object.keys(a.props).includes("heartbeatIncoming")&&(a.client.heartbeat.incoming=a.props.heartbeatIncoming),Object.keys(a.props).includes("heartbeatOutgoing")&&(a.client.heartbeat.outgoing=a.props.heartbeatOutgoing),a.props.debug||(a.client.debug=function(){})},a._cleanUp=function(){a.setState({connected:!1}),a.retryCount=0,a.subscriptions.clear()},a._log=function(e){a.props.debug&&console.log(e)},a._subscribe=function(e){if(!a.subscriptions.has(e)){var t=a.client.subscribe(e,(function(e){a.props.onMessage(a._processMessage(e.body),e.headers.destination)}),a.props.subscribeHeaders);a.subscriptions.set(e,t)}},a._processMessage=function(e){try{return JSON.parse(e)}catch(t){return e}},a._unsubscribe=function(e){a.subscriptions.get(e).unsubscribe(),a.subscriptions.delete(e)},a._connect=function(){a._initStompClient(),a.client.connect(a.props.headers,(function(){a.setState({connected:!0}),a.props.topics.forEach((function(e){a._subscribe(e)})),a.props.onConnect()}),(function(e){e&&(Object.keys(a.props).includes("onConnectFailure")?a.props.onConnectFailure(e):a._log(e.stack)),a.state.connected&&(a._cleanUp(),a.props.onDisconnect()),a.props.autoReconnect&&!a.state.explicitDisconnect&&(a._timeoutId=setTimeout(a._connect,a.props.getRetryInterval(a.retryCount++)))}))},a.connect=function(){a.setState({explicitDisconnect:!1}),a.state.connected||a._connect()},a.disconnect=function(){a._timeoutId&&(clearTimeout(a._timeoutId),a._timeoutId=null),a.setState({explicitDisconnect:!0}),a.state.connected&&(a.subscriptions.forEach((function(e){a._unsubscribe(e)})),a.client.disconnect((function(){a._cleanUp(),a.props.onDisconnect(),a._log("Stomp client is successfully disconnected!")})))},a.sendMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!a.state.connected)throw new Error("Send error: SockJsClient is disconnected");a.client.send(e,n,t)},a.state={connected:!1,explicitDisconnect:!1},a.subscriptions=new Map,a.retryCount=0,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._connect()}},{key:"componentWillUnmount",value:function(){this.disconnect()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.state.connected&&(Be.a.difference(e.topics,this.props.topics).forEach((function(e){t._log("Subscribing to topic: "+e),t._subscribe(e)})),Be.a.difference(this.props.topics,e.topics).forEach((function(e){t._log("Unsubscribing from topic: "+e),t._unsubscribe(e)})))}},{key:"render",value:function(){return null}}]),t}(c.a.Component);Le.defaultProps={onConnect:function(){},onDisconnect:function(){},getRetryInterval:function(e){return 1e3*e},options:{},headers:{},subscribeHeaders:{},autoReconnect:!0,debug:!1,heartbeat:1e4};var De,ze=Le,Fe=function(e){function t(e){var a;Object(d.a)(this,t),a=Object(m.a)(this,Object(f.a)(t).call(this,e));var n={};return(De=e.config).votingPapers&&De.votingPapers[0]&&(n={id:De.votingPapers[0].id,label:De.votingPapers[0].name}),a.state={items:[],activeItem:n,visible:!0},De.votingPapers.map((function(e){return De.admin?a.state.items.push({id:e.id,label:e.name,icon:"pi pi-fw pi-briefcase"}):a.state.items.push({id:e.id,label:e.name})})),a.state.confirmButtonLabel=c.a.createElement(E.a,{id:"app.confirm",defaultMessage:"Confirm"}),De.admin&&a.state.items.push({label:"+"}),(De.votingPapers.length>0||De.admin)&&a.state.items.push({label:a.state.confirmButtonLabel}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=w(this);e&&e[0]&&e[0].click()}},{key:"componentDidUpdate",value:function(){"websocket"===this.state.operation&&(w(this),this.setState({operation:void 0}))}},{key:"render",value:function(){var e=this,t=c.a.createElement(ge,{ref:"confirm",window:this}),a="",n="",i="";return De.admin&&(t=c.a.createElement(ye,{ref:"confirm",window:this}),a=c.a.createElement(Oe,{ref:"modalVotingPaper"}),n=c.a.createElement(Q,{ref:"ruler"}),i=c.a.createElement(ze,{url:"https://vota-votingpapers.vige.it:8543/votingpaper-websocket",topics:["/topic/votingpaper"],onMessage:function(t){t.votingPapers.forEach((function(t,a){var n=e.state.items[a];if(0===e.state.items.filter((function(e){return e.id===t.id})).length){De.votingPapers.push(t);var i=e.state.items.length-2;e.setState({items:x({id:t.id,label:t.name,icon:"pi pi-fw pi-briefcase"},i,e.state.items)})}else if(n.id===t.id){n&&(n.label=t.name);var r=De.votingPapers[a];r&&(r.type=t.type,r.disjointed=t.disjointed,r.color=t.color,r.maxCandidates=t.maxCandidates,r.name=t.name,r.groups=t.groups,r.parties=t.parties)}})),De.votingPapers.filter((function(e){return-1===t.votingPapers.map((function(e){return e.id})).indexOf(e.id)})).forEach((function(t){return M(t,e)}));var a=S(e),n=e.state.items.map((function(e){return e.id})).indexOf(e.state.activeItem.id);n>=0&&a[n].click(),e.setState({operation:"websocket"})}})),c.a.createElement("div",{className:"App"},i,c.a.createElement("div",{className:"content-section implementation"},c.a.createElement(F,{ref:"validator"}),n,c.a.createElement(Pe.TabMenu,{ref:"tabMenu",className:this.state.visible?"":"disabled",model:this.state.items,activeItem:this.state.activeItem,onTabChange:function(t){if(De.admin&&t.originalEvent.target.className.startsWith("pi")){var a=function(e){if(e){var t="";return De.votingPapers.forEach((function(a){a.id===e.id&&(t=a)})),t}return""}(t.value);e.refs.modalVotingPaper.setState({votingPaper:t,app:e,operation:"update",disjointed:a.disjointed,maxCandidates:a.maxCandidates,color:a.color,type:a.type}),e.refs.modalVotingPaper.open()}else e.state.visible&&(t.value.label===e.state.confirmButtonLabel?e.refs.confirm.open():"+"===t.value.label?(e.refs.modalVotingPaper.setState({votingPaper:"",app:e,operation:"insert",disjointed:!1,maxCandidates:0,color:"1976D2",type:"bigger"}),e.refs.modalVotingPaper.open()):e.setState({activeItem:t.value}))}}),a,t,c.a.createElement("p",{className:"powered"},c.a.createElement("img",{alt:"logo",className:"logo",src:we.a}),c.a.createElement(E.a,{id:"app.powered",defaultMessage:"Powered by "}),c.a.createElement("a",{href:"http://www.vige.it"},"Vige"))),De.votingPapers.map((function(t){var a=c.a.createElement(E.a,{id:"app.confirm.confirmedheader",defaultMessage:"Your vote was sent!"}),n=c.a.createElement(E.a,{id:"app.confirm.confirmedbody",defaultMessage:"Your vote has been sent successfully. The results will be shown shortly. We thank you for your participation"});return c.a.createElement("header",{key:"header-"+t.id,className:"App-header "+t.type,ref:"header-"+t.id,style:t.name!==e.state.activeItem.label?{display:"none"}:{backgroundImage:"url(".concat(Ne.a,")"),backgroundColor:"#"+t.color,borderColor:"#"+t.color}},c.a.createElement(pe,{config:t,visible:e.state.visible,ref:"votingpaper-"+t.id}),c.a.createElement(Me.Panel,{header:a,style:e.state.visible?{display:"none"}:{}},n))})))}}]),t}(s.Component),Ae=(a(228),a(229),a(230),a(231),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Re(e){if("serviceWorker"in navigator){if(new URL("/frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/frontend","/service-worker.js");Ae?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ge(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):Ge(t,e)}))}}function Ge(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var We=a(94),Ve=a.n(We),Ye=a(95),qe=a.n(Ye),Je=a(96),Xe=a(97),Ke=(a(233),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"error-boundary"},c.a.createElement("h2",null,c.a.createElement(E.a,{id:"app.error",defaultMessage:"Something went wrong."})),c.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.props.error&&this.props.error.toString(),c.a.createElement("br",null),this.props.errorInfo.componentStack))}}]),t}(c.a.Component));Object(E.c)([].concat(Object(o.a)(Ve.a),Object(o.a)(qe.a)));var $e={it:Je},Qe=navigator.language.split(/[-_]/)[0];p.a.render(c.a.createElement(Xe.ProgressSpinner,null),document.getElementById("root")),fe.a.get("https://vota-votingpapers.vige.it:8543/votingPapers").then((function(e){p.a.render(c.a.createElement(E.b,{locale:Qe,messages:$e[Qe]},c.a.createElement(Fe,{config:e.data})),document.getElementById("root")),Re()})).catch((function(e){p.a.render(c.a.createElement(E.b,{locale:Qe,messages:$e[Qe]},c.a.createElement(Ke,{error:e,errorInfo:e})),document.getElementById("root")),console.log(e)}))},80:function(e,t){},82:function(e,t,a){e.exports=a.p+"static/media/x.5067911c.png"},89:function(e,t,a){e.exports=a.p+"static/media/background.75de7822.png"},90:function(e,t,a){e.exports=a.p+"static/media/logo.71fca57e.ico"},96:function(e){e.exports=JSON.parse('{"app.powered":"Sviluppato da ","app.confirm":"Conferma","app.cancel":"Annulla","app.delete":"Rimuovi","app.insert":"Inserisci","app.update":"Aggiorna","app.confirm.header":"Conferma il voto","app.confirm.body":"Cliccando su \'Si\' confermerai l\'invio dei dati. Una volta confermato non potrai pi\xf9 tornare indietro. Confermi il salvataggio?","app.confirm.ins.header":"Conferma l\'aggiornamento","app.confirm.ins.body":"Cliccando su \'Si\' confermerai l\'invio dei dati. Confermi il salvataggio?","app.confirm.party":"partito","app.confirm.group":"coalizione","app.confirm.candidate":"candidato","app.confirm.norecordsfound":"Scheda bianca","app.confirm.confirmedheader":"Il tuo voto \xe8 stato confermato!","app.confirm.confirmedbody":"Il tuo voto \xe8 stato inviato con successo. A breve verranno mostrati i risultati. Ti ringraziamo per la tua partecipazione","app.configuration.header":"Configura la scheda","app.configuration.headerparty":"Configura il partito","app.configuration.headergroup":"Configura la coalizione","app.configuration.headercandidates":"Gestione dei candidati","app.configuration.headerinsertparty":"Inserisci il partito","app.configuration.headerinsertgroup":"Inserisci la coalizione","app.configuration.name":"Nome","app.configuration.namesurname":"Nome e cognome","app.configuration.gender":"Sesso","app.configuration.title":"Titolo","app.configuration.chooseimage":"Scegli l\'Immagine","app.configuration.disjointed":"Voto disgiunto","app.configuration.maxcandidates":"Numero di candidati","app.configuration.color":"Colore della scheda","app.configuration.templateslabel":"Tipo di scheda","app.configuration.insert.header":"Aggiungi la scheda","app.yes":"Si","app.no":"No","app.error":"Errore","app.error.candidate":"la candidatura di","app.error.party":"il partito","app.error.group":"la coalizione","app.error.message":"Non \xe8 possibile selezionare {type} {value}","app.admin.error.name":"Il nome della scheda \xe8 obbligatorio","app.admin.error.maxname":"Puoi specificare un numero massimo di {number} caratteri per il nome","app.admin.error.existingname":"Il nome della scheda esiste gi\xe0","app.admin.error.party.name":"Il nome del partito \xe8 obbligatorio","app.admin.error.group.name":"Il nome della coalizione \xe8 obbligatorio","app.admin.error.candidate.name":"Il nome del candidato \xe8 obbligatorio","app.admin.error.candidate.sex":"Il sesso del candidato \xe8 obbligatorio","app.admin.error.candidate.existingname":"Il nome del candidato esiste gi\xe0","app.admin.error.candidate.existingimage":"L\'immagine del candidato esiste gi\xe0","app.admin.error.candidate.casename":"Il nome e cognome del candidato devono iniziare con la lettera maiuscola e terminare con le lettere minuscole","app.admin.error.candidate.surname":"Inserire sia nome che cognome","app.admin.error.style":"Lo stile della scheda \xe8 obbligatorio","app.admin.error.disjointed":"Prima di modificare il voto disgiunto devi rimuovere tutte le selezioni effettuate sulla scheda \'{name}\'","app.admin.error.file.summary":"{0}: Dimensione non valida, ","app.admin.error.file.detail":"la dimensione massima \xe8 {0}.","app.admin.error.littlenogroup":"Non \xe8 possibile passare da un tipo di scheda a partito ad un tipo a coalizione o viceversa. Rimuovere e ricreare la scheda"}')},99:function(e,t,a){e.exports=a(234)}},[[99,1,2]]]);
//# sourceMappingURL=main.bf251616.chunk.js.map